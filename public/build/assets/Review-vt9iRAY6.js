import{W as re,r as a,j as e,a as oe,y as P}from"./app-a8XdfzoK.js";import{L as te,T as ne}from"./index-C5Wy0a0n.js";import{h as T}from"./moment-C5S46NFB.js";/* empty css              *//* empty css              */import{D as ie}from"./index-UHBd6UEU.js";import{S as ce,C as F}from"./index-Bm9Xp-ec.js";import C from"./Constants-PN1U8XdT.js";import{J as R}from"./JoiValidator-BJRNeary.js";import ae from"./MatchedMentors-AGSx7pYJ.js";import{Q as le,n as i}from"./Notifier-DKkOYXmd.js";/* empty css                      */import{B as l}from"./Box--t4lyNkS.js";import{T as r}from"./Typography-p3STOrkk.js";import{G as t}from"./Grid-DTYKzQue.js";import{B as m}from"./Button-CxCFsLvW.js";import{A as L}from"./Avatar-BRiliBP1.js";import{F as me}from"./FormControlLabel-DPt0LmxU.js";import{T as O}from"./TextField-DM4v8mMi.js";import"./createSvgIcon-6z8oCkG4.js";import"./useIsFocusVisible-DmdBRjTN.js";import"./Constants-CkBMBwOZ.js";import"./resolveComponentProps-B7y9CQY0.js";import"./ButtonBase-BMR6WyXS.js";import"./DeleteIcon-sMFUeFB3.js";import"./EditIcon-DZ7IjKBt.js";import"./Paper-CVPSC_Hh.js";import"./DialogContent-CUCjoTM9.js";import"./DialogTitle-JKjtixw3.js";import"./DialogContentText-d4fasllg.js";import"./NoDataFound-Dz99uH9M.js";import"./TableRow-CH6QETBT.js";import"./useSlot-DO6L54je.js";import"./Stack-B6um9Rf_.js";import"./GlobalStyles-Ulgh61JB.js";const Qe=({detail:s})=>{var E,W,N,A;const{data:c,setData:U,post:h,processing:k}=re({...C.initResetPasswordField,...s.user});let _=T(s!=null&&s.updated_at?s.updated_at:s.created_at).clone().add(7,"days"),w=T();const[B,f]=a.useState(!1),[I,j]=a.useState(!1),[G,p]=a.useState(!1),[J,M]=a.useState(!1),[d,S]=a.useState({}),[y,z]=a.useState(!1),[g,b]=a.useState(c.status),[$,H]=a.useState(c.is_accepted);a.useEffect(()=>{H(s.user.is_accepted),b(s.user.status)},[s.user.status,s.user.is_accepted]);const Q=()=>{M(!0)},v=(o,n)=>{S({...d,[o]:R.validateToPlainErrors(n,C.resetPasswordSchema[o])}),(o==="confirm_new_password"||o==="new_password")&&(c.new_password!==n&&c.confirm_new_password!==n?z(!0):z(!1)),U(x=>({...x,[o]:n}))},V=o=>{var D;o.preventDefault();let n=R.validateToPlainErrors(c,C.resetPasswordSchema);S(n);const x=(D=Object.keys(n))==null?void 0:D.map((u,se)=>n[u]==null?0:se);if((x==null?void 0:x.length)>0||c.confirm_new_password!==c.new_password){d.confirm_new_password=c.confirm_new_password!==c.new_password?"Passwords does not match":"";return}else h(route("company.resetPassword",s.id),{onSuccess:u=>{console.log(u,"sucesss"),i.success("Password has been updated successfully")},onError:u=>{console.log(u.email,"::error"),i.error("Error while updating password")}})},Y=()=>{h(route("landing.deleteCompanyUser",s.id),{onSuccess:o=>{i.success("Company Data successfully sent for deletion"),console.log(o,"successs"),f(!1)},onError:o=>{i.error("Error in Company Delete"),console.log(o,"error"),f(!1)}})},q=o=>{o.preventDefault(),h(route("admin.acceptedCompanyProfile",s.id),{onSuccess:n=>{console.log(n,"sucesss"),i.success("User has been Live successfully"),p(!1)},onError:n=>{console.log(n.email,"::error"),i.error("Error while user Live"),p(!1)}}),p(!1)},K=o=>{o.preventDefault(),h(route("admin.rejectedCompanyProfile",s.id),{onSuccess:n=>{console.log(n,"sucesss"),i.success("User has been rejected successfully")},onError:n=>{console.log(n.email,"::error"),i.error("Error while rejecting user")}}),j(!1)},X=o=>{const n=o.target.checked?1:0;b(n)},Z=o=>{o.preventDefault(),P.post(route("admin.updateCompanyStatus",s.id),{userStatus:g,onSuccess:n=>{i.success("Status has been updated successfully"),console.log(n,"success")},onError:n=>{i.error("Error while updating Status"),console.log(n,"error")}})},ee=()=>{P.post(route("admin.addFeaturedSme",s.id),{onSuccess:o=>{i.success("Added to featured section successfully"),console.log(o,"success")},onError:o=>{i.error("Error while adding"),console.log(o,"error")}})};return e.jsxs(te,{auth:s.logged_user,children:[e.jsx(le,{style:{marginTop:"53px"}}),e.jsxs(l,{className:"company_detail_review",children:[e.jsx(r,{sx:{height:"65px"}}),e.jsxs(t,{item:!0,xs:12,px:5,pt:4,pb:0,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:{md:"space-between"}},children:[e.jsx(r,{pl:4,fontWeight:700,fontSize:"28px",color:"#223049",children:"Company Details"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",flexDirection:{xs:"column",md:"row"}},children:[e.jsxs(l,{className:"custom_btn custom_delete_btn flex  flex-col sm:flex-row items-center",children:[s&&s.logged_user.user_role==="admin"&&$===null&&e.jsxs(e.Fragment,{children:[e.jsx(m,{onClick:()=>j(!0),sx:{mr:1,mb:{md:0,xs:1}},className:"delete_account",variant:"contained",children:"Reject"}),e.jsx(m,{onClick:()=>p(!0),sx:{mr:1,mb:{md:0,xs:1}},variant:"contained",children:"Accept"})]}),s&&s.logged_user&&s.logged_user.user_role==="admin"&&e.jsx(m,{onClick:()=>ee(),sx:{mr:1,mb:{md:0,xs:1}},variant:"contained",children:s&&s.featured_sme=="yes"?"Remove from featured":"Add to featured"}),e.jsx(ne,{placement:"top",title:"Edit will be enabled after 7 days",disableHoverListener:s.logged_user.user_role==="admin"||s.logged_user.user_role==="entrepreneur"||w.isAfter(_),children:e.jsx("span",{children:e.jsx(m,{disabled:!(s.logged_user.user_role==="admin"||s.logged_user.user_role==="entrepreneur"||w.isAfter(_)),component:oe,href:route("landing.companydetail",s.user.id),type:"submit",variant:"contained",sx:{mr:1,mb:{md:0,xs:1}},children:"Edit"})})})]}),e.jsx(l,{className:"custom_delete_btn",children:e.jsx(m,{className:"delete_account",onClick:()=>f(!0),variant:"contained",children:"Delete Account"})})]})]}),e.jsxs(l,{sx:{py:3,pl:2},className:"company_detail_review_title",children:[e.jsxs(t,{container:!0,sx:{pl:3},children:[e.jsxs(t,{item:!0,xs:12,md:3,mt:2,children:[e.jsx(r,{variant:"h6",pb:2,fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Profile Photo"}),e.jsx(L,{alt:"company_img",src:s.profile_photo,sx:{width:"100px",height:"100px"}})]}),e.jsxs(t,{item:!0,xs:12,md:3,mt:2,children:[e.jsx(r,{variant:"h6",pb:2,fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Founder Photo"}),e.jsx(L,{alt:"founder_img",src:s.founder_photo,sx:{width:"100px",height:"100px"}})]})]}),e.jsxs(t,{container:!0,sx:{padding:"24px 24px 0 24px"},children:[e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Company Name"}),e.jsx(r,{fontSize:"14px",children:s.company_name})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Email"}),e.jsx(r,{fontSize:"14px",children:s.user.email})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"User Name"}),e.jsx(r,{fontSize:"14px",children:s.user.name})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Company UEN"}),e.jsx(r,{fontSize:"14px",children:s.company_uen})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Contact Name"}),e.jsx(r,{fontSize:"14px",children:s.contact_name})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Position In Company"}),s.position.map(o=>e.jsx(r,{fontSize:"14px",children:o},o))]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Year Founded"}),e.jsx(r,{fontSize:"14px",children:s.founded_year})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Team Size, Number Of Employees"}),e.jsx(r,{fontSize:"14px",children:s.team_size})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Current Revenue Size"}),e.jsx(r,{fontSize:"14px",children:s.current_revenue})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Current Customers Base Size"}),e.jsx(r,{fontSize:"14px",children:s.current_customers_base_size})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Industry sector"}),e.jsx(r,{fontSize:"14px",children:s.industry_sector})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Functional Area 1"}),e.jsx(r,{fontSize:"14px",children:s.functional_area_1})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Functional Area 2"}),e.jsx(r,{fontSize:"14px",children:s.functional_area_2})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{fontSize:"18px",fontWeight:600,color:"#7C7C7C",children:"Functional Area 3"}),e.jsx(r,{fontSize:"14px",children:s.functional_area_3})]}),e.jsxs(t,{item:!0,xs:12,md:4,lg:3,sm:6,my:2,children:[e.jsx(r,{color:"#7C7C7C",fontSize:"18px",fontWeight:600,children:"Current problem"}),e.jsx(r,{fontSize:"14px",children:s.current_problem})]}),e.jsxs(t,{item:!0,xs:12,my:2,pr:15,children:[e.jsx(r,{color:"#7C7C7C",fontSize:"18px",fontWeight:600,children:"Additional Information"}),e.jsx(r,{fontSize:"14px",children:s.additional_information})]})]}),s.logged_user.user_role==="admin"&&e.jsxs(l,{className:"status_box",sx:{padding:"0 0 24px 24px"},children:[e.jsx(r,{fontWeight:600,fontSize:"18px",textAlign:"left",color:"#7C7C7C",children:"Status"}),e.jsx(me,{control:e.jsx(ce,{checked:g===1}),label:g===1?"Active":"Inactive",onChange:X}),e.jsx(l,{className:"custom_btn inline",children:e.jsx(m,{onClick:Z,variant:"contained",children:"Save"})})]}),s.logged_user.user_role==="entrepreneur"&&e.jsxs(l,{className:"reset_password_container",sx:{padding:"0 0 24px 24px"},children:[e.jsx(l,{className:"custom_btn",children:e.jsx(m,{onClick:()=>Q(),variant:"contained",sx:{padding:"4px 20px !important",my:2},children:"Reset Password"})}),J===!0&&e.jsx("form",{method:"post",onSubmit:V,children:e.jsxs(t,{container:!0,spacing:4,className:"input_fields",children:[e.jsxs(t,{item:!0,px:2,xs:12,md:3,children:[e.jsx(r,{fontWeight:600,fontSize:"16px",textAlign:"left",color:"#7C7C7C",children:"New Password"}),e.jsx(O,{size:"small",sx:{mt:1,width:"100%"},fullWidth:!0,value:c.new_password,variant:"outlined",type:"password",placeholder:"New Password ",onChange:o=>v("new_password",o.target.value),error:!!((E=d.new_password)!=null&&E[0]),helperText:(W=d.new_password)==null?void 0:W[0]})]}),e.jsxs(t,{item:!0,px:2,xs:12,md:3,children:[e.jsx(r,{fontWeight:600,fontSize:"16px",textAlign:"left",color:"#7C7C7C",children:"Confirm New Password"}),e.jsx(O,{size:"small",sx:{mt:1,width:"100%"},fullWidth:!0,value:c.confirm_new_password,variant:"outlined",type:"password",placeholder:"Confirm New Password",onChange:o=>v("confirm_new_password",o.target.value),error:!!((N=d.confirm_new_password)!=null&&N[0])||y,helperText:((A=d.confirm_new_password)==null?void 0:A[0])||(y?"Passwords does not match":"")})]}),e.jsx(t,{item:!0,px:2,xs:12,md:3,className:"custom_btn",children:e.jsx(m,{sx:{mt:{lg:"32px"},padding:"15px 25px !important"},type:"submit",disabled:k,variant:"contained",children:"Save"})})]})})]})]}),e.jsx(ae,{mentors:s.mentors})]}),e.jsx(ie,{open:B,setOpen:f,handleDelete:Y}),e.jsx(F,{open:I,setOpen:j,handleSubmit:K,message:`Do you really want to reject ${s.company_name}`}),e.jsx(F,{open:G,setOpen:p,handleSubmit:q,message:`Do you really want to Live ${s.company_name}`})]})};export{Qe as default};
